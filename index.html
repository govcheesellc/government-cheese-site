<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Government Cheese | Official Site</title>

    <!-- Link to Reset and Main CSS -->
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">

    <!-- Google Fonts - Space Mono for a typewriter feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="main-header">
        <nav class="nav-container">
            <div class="logo">GOVERNMENT CHEESE</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="pages/about.html">About</a></li>
                <li><a href="pages/shop.html">Shop</a></li>
                <li><a href="pages/contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main class="hero">
        <div class="hero-content">
            <h1>CHEESE HAPPENS</h1>
            <p class="tagline">Official merch coming soon...</p>
            <button class="cta-button">Join Waitlist</button>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Government Cheese. All rights reserved.</p>
    </footer>

    <!-- Snipcart script with API key and error handling -->
    <script>
        // Configuration for Snipcart
        window.SnipcartSettings = {
            publicApiKey: 'ST_ZDJjMjY5ODctZjMyZC00N2VhLTkzNDItNjg0ZGFmYTY1YmY3NjM4NjY0MTQ3NTc5NTEyNjM1',
            loadStrategy: 'on-user-interaction',
        };

        // Retry function for Snipcart loading
        function loadSnipcartWithRetry(retries = 3, delay = 2000) {
            let attempts = 0;
            const loadSnipcartScript = () => {
                try {
                    if (window.LoadSnipcart) {
                        window.LoadSnipcart();
                    } else {
                        throw new Error("Snipcart script not yet available.");
                    }
                } catch (error) {
                    console.error("Error loading Snipcart:", error);
                    attempts++;
                    if (attempts < retries) {
                        console.log(`Retrying Snipcart load... (${attempts})`);
                        setTimeout(loadSnipcartScript, delay);
                    } else {
                        displayUserMessage("Unable to load cart. Please try again later.");
                    }
                }
            };
            loadSnipcartScript();
        }

        // Trigger Snipcart load based on user interaction or fallback
        document.addEventListener("DOMContentLoaded", () => {
            if (window.SnipcartSettings.loadStrategy === 'on-user-interaction') {
                ["click", "mouseover"].forEach(event =>
                    document.addEventListener(event, loadSnipcartWithRetry, { once: true })
                );
            } else {
                loadSnipcartWithRetry();
            }
        });

        // Optional: Display user message if error occurs
        function displayUserMessage(message) {
            const errorContainer = document.createElement("div");
            errorContainer.className = "error-message";
            errorContainer.innerText = message;
            document.body.prepend(errorContainer);
        }
    </script>

    <!-- Link to main JavaScript (optional) -->
    <script src="js/main.js"></script>
</body>
</html>
